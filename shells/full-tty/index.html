<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Upgrade to Fully Interactive TTYs More often than not, reverse, or bind shells are shells with limited interactive capabilities. Meaning no job control, no auto-completion, no STDERR output, and, most important, poor signal handling and limited commands support. To fully leverage the shell it is convenient to upgrade to an interactive TTY with extended features.
To check if the shell is a TTY shell use the tty command.  Shell to Bash Upgrade from shell to bash."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="Upgrade Simple Shells to Fully Interactive TTYs"><meta property="og:description" content="Upgrade to Fully Interactive TTYs More often than not, reverse, or bind shells are shells with limited interactive capabilities. Meaning no job control, no auto-completion, no STDERR output, and, most important, poor signal handling and limited commands support. To fully leverage the shell it is convenient to upgrade to an interactive TTY with extended features.
To check if the shell is a TTY shell use the tty command.  Shell to Bash Upgrade from shell to bash."><meta property="og:type" content="article"><meta property="og:url" content="https://0xffsec.com/handbook/shells/full-tty/"><meta property="og:image" content="https://0xffsec.com/handbook/images/banner.png"><meta property="article:modified_time" content="2020-10-24T12:50:37+02:00"><meta itemprop=name content="Upgrade Simple Shells to Fully Interactive TTYs"><meta itemprop=description content="Upgrade to Fully Interactive TTYs More often than not, reverse, or bind shells are shells with limited interactive capabilities. Meaning no job control, no auto-completion, no STDERR output, and, most important, poor signal handling and limited commands support. To fully leverage the shell it is convenient to upgrade to an interactive TTY with extended features.
To check if the shell is a TTY shell use the tty command.  Shell to Bash Upgrade from shell to bash."><meta itemprop=dateModified content="2020-10-24T12:50:37+02:00"><meta itemprop=wordCount content="164"><meta itemprop=image content="https://0xffsec.com/handbook/images/banner.png"><meta itemprop=keywords content><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://0xffsec.com/handbook/images/banner.png"><meta name=twitter:title content="Upgrade Simple Shells to Fully Interactive TTYs"><meta name=twitter:description content="Upgrade to Fully Interactive TTYs More often than not, reverse, or bind shells are shells with limited interactive capabilities. Meaning no job control, no auto-completion, no STDERR output, and, most important, poor signal handling and limited commands support. To fully leverage the shell it is convenient to upgrade to an interactive TTY with extended features.
To check if the shell is a TTY shell use the tty command.  Shell to Bash Upgrade from shell to bash."><title>Upgrade Simple Shells to Fully Interactive TTYs | 0xffsec Handbook</title><link rel=manifest href=https://0xffsec.com/handbook/manifest.json><link rel=icon href=https://0xffsec.com/handbook/favicon.png type=image/x-icon><link rel=stylesheet href=https://0xffsec.com/handbook/book.min.7b4a04e38781f38a2e961b51691a30487f2a0b503216f77946776019399afdcd.css integrity="sha256-e0oE44eB84oulhtRaRowSH8qC1AyFvd5RndgGTma/c0="><script defer src=https://0xffsec.com/handbook/en.search.min.88ed54d03ef183dc220f12ac82b9d1b4b051767b4de2496ee8467eafc3a2751f.js integrity="sha256-iO1U0D7xg9wiDxKsgrnRtLBRdntN4klu6EZ+r8OidR8="></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-142676329-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=https://0xffsec.com/handbook/><img src=https://0xffsec.com/handbook/images/logo.png alt=Logo><span>0xffsec Handbook</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><input type=checkbox id=section-35d81374824c25dc2919edbbc61d971f class=toggle>
<label for=section-35d81374824c25dc2919edbbc61d971f class="flex justify-between"><a>Information Gathering</a>
<span>▾</span></label><ul><li><a href=https://0xffsec.com/handbook/information-gathering/assets-discovery/>Assets Discovery</a></li></ul></li><li><input type=checkbox id=section-235f64cfc2023c9b7289c228d0c51f53 class=toggle>
<label for=section-235f64cfc2023c9b7289c228d0c51f53 class="flex justify-between"><a>Discovery and Scanning</a>
<span>▾</span></label><ul><li><a href=https://0xffsec.com/handbook/discovery-and-scanning/host-discovery/>Host Discovery</a></li><li><a href=https://0xffsec.com/handbook/discovery-and-scanning/port-scanning/>Port Scanning</a></li></ul></li><li><a href=https://0xffsec.com/handbook/exploits-search/>Exploit Search</a></li><li><a href=https://0xffsec.com/handbook/brute-forcing/>Brute Forcing</a></li><li><input type=checkbox id=section-057108a1c1a3662b9db6ab679412fa8f class=toggle>
<label for=section-057108a1c1a3662b9db6ab679412fa8f class="flex justify-between"><a href=https://0xffsec.com/handbook/services/>Service Enumeration</a>
<span>▾</span></label><ul><li><a href=https://0xffsec.com/handbook/services/ftp/>FTP - 21</a></li><li><a href=https://0xffsec.com/handbook/services/smtp/>SMTP - 25 / 465 / 587</a></li><li><a href=https://0xffsec.com/handbook/services/dns/>DNS - 53</a></li><li><a href=https://0xffsec.com/handbook/services/finger/>Finger - 79</a></li><li><a href=https://0xffsec.com/handbook/services/http-https/>HTTP/S - 80 / 443</a></li><li><a href=https://0xffsec.com/handbook/services/pop/>POP - 110 / 995</a></li><li><a href=https://0xffsec.com/handbook/services/nntp/>NNTP - 119 / 433 / 563</a></li><li><a href=https://0xffsec.com/handbook/services/msrpc/>MSRPC - 135 / 593</a></li><li><a href=https://0xffsec.com/handbook/services/netbios/>NetBIOS - 137 / 138 / 139</a></li><li><a href=https://0xffsec.com/handbook/services/smb/>SMB - 139 / 445</a></li><li><a href=https://0xffsec.com/handbook/services/imap/>IMAP - 143 / 993</a></li></ul></li><li><a href=https://0xffsec.com/handbook/steganography/>Steganography</a></li><li><input type=checkbox id=section-4710461fd82136af748c8186e2a511e1 class=toggle>
<label for=section-4710461fd82136af748c8186e2a511e1 class="flex justify-between"><a>Web Applications</a>
<span>▾</span></label><ul><li><a href=https://0xffsec.com/handbook/web-applications/cgi/>CGI</a></li><li><a href=https://0xffsec.com/handbook/web-applications/command-injection/>Command Injection</a></li><li><a href=https://0xffsec.com/handbook/web-applications/csrf/>CSRF</a></li><li><a href=https://0xffsec.com/handbook/web-applications/file-inclusion-and-path-traversal/>LFI / RFI and Path Traversal</a></li></ul></li><li><input type=checkbox id=section-9b274a52224e37b079acf4aae5f9f128 class=toggle checked>
<label for=section-9b274a52224e37b079acf4aae5f9f128 class="flex justify-between"><a>Shells</a>
<span>▾</span></label><ul><li><a href=https://0xffsec.com/handbook/shells/reverse-shells/>Reverse Shells</a></li><li><a href=https://0xffsec.com/handbook/shells/full-tty/ class=active>Upgrade to Full TTY</a></li><li><a href=https://0xffsec.com/handbook/shells/restricted-shells/>Escape Restricted Shells</a></li></ul></li><li><a href=https://0xffsec.com/handbook/exfiltration/>Data Exfiltration</a></li><li><input type=checkbox id=section-ef46fe0aac274900fefdd5e564e236b2 class=toggle>
<label for=section-ef46fe0aac274900fefdd5e564e236b2 class="flex justify-between"><a href=https://0xffsec.com/handbook/notes/>Notes</a>
<span>▾</span></label><ul><li><a href=https://0xffsec.com/handbook/notes/how-to-open-jar-files/>JAR Files</a></li><li><a href=https://0xffsec.com/handbook/notes/smb-protocol-negotiation-failed/>SMB Protocol Negotiation Failed</a></li><li><a href=https://0xffsec.com/handbook/notes/ssh-legacy-key-exchange/>SSH Legacy Key Exchange</a></li></ul></li></ul><ul><li><a href=https://github.com/0xffsec/handbook target=_blank rel=noopener>GitHub</a></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=https://0xffsec.com/handbook/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Upgrade Simple Shells to Fully Interactive TTYs</strong>
<label for=toc-control><img src=https://0xffsec.com/handbook/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><ul><li><a href=#shell-to-bash>Shell to Bash</a></li><li><a href=#python-pty-module-python-pty-module>Python PTY Module</a></li><li><a href=#fully-interactive-tty>Fully Interactive TTY</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=upgrade-to-fully-interactive-ttys>Upgrade to Fully Interactive TTYs</h1><p>More often than not, reverse, or bind shells are shells with limited interactive capabilities. Meaning no job control, no auto-completion, no <code>STDERR</code> output, and, most important, poor signal handling and limited commands support. To fully leverage the shell it is convenient to upgrade to an interactive TTY with extended features.</p><blockquote class="book-hint info">To check if the shell is a TTY shell use the <code>tty</code> command.</blockquote><h3 id=shell-to-bash>Shell to Bash</h3><p>Upgrade from shell to bash.</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#40ffff>SHELL</span>=/bin/bash script -q /dev/null
</code></pre></div><h3 id=python-pty-module-python-pty-module>Python PTY Module <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></h3><p>Spawn <code>/bin/bash</code> using <a href=https://docs.python.org/3/library/pty.html>Python&rsquo;s PTY module</a>, and connect the controlling shell with its standard I/O.</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>python -c <span style=color:#ed9d13>&#39;import pty; pty.spawn(&#34;/bin/bash&#34;)&#39;</span>
</code></pre></div><h3 id=fully-interactive-tty>Fully Interactive TTY</h3><p>Background the current remote shell (<code>^Z</code>), update the <strong>local</strong> terminal line settings with <code>stty</code><sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> and bring the remote shell back.</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>stty raw -echo &amp;&amp; <span style=color:#24909d>fg</span>
</code></pre></div><p>After bringing the job back the cursor will be pushed to the left. Reinitialize the terminal with <code>reset</code>.</p><section class=footnotes role=doc-endnotes><hr><ol><li id=fn:1 role=doc-endnote><p>“Pty — Pseudo-Terminal Utilities.” 3.8.3 Documentation, <a href=https://docs.python.org/3/library/pty.html>https://docs.python.org/3/library/pty.html</a>. <a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2 role=doc-endnote><p>“Stty.” Linux Manual Page, <a href=https://man7.org/linux/man-pages/man1/stty.1.html>https://man7.org/linux/man-pages/man1/stty.1.html</a>. <a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></section></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/0xffsec/handbook/commit/950352e22f0a91f69c75a143a165d7161b59c585 title="Last modified by Max Rodrigo | October 24, 2020" target=_blank rel=noopener><img src=https://0xffsec.com/handbook/svg/calendar.svg class=book-icon alt=Calendar>
<span>October 24, 2020</span></a></div><div><a class="flex align-center" href=https://github.com/0xffsec/handbook/edit/master/content//shells/full-tty.md target=_blank rel=noopener><img src=https://0xffsec.com/handbook/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><ul><li><a href=#shell-to-bash>Shell to Bash</a></li><li><a href=#python-pty-module-python-pty-module>Python PTY Module</a></li><li><a href=#fully-interactive-tty>Fully Interactive TTY</a></li></ul></li></ul></nav></aside></main></body></html>