<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Full TTY More often than not, reverse, or bind shells are shells with limited interactive capabilities. Meaning no job control, no auto-completion, no STDERR output, and, most important, poor signal handling and limited commands support. To fully leverage the shell it is convenient to upgrade to an interactive TTY with extended features.
To check if the shell is a TTY shell use the tty command.  Shell to Bash Upgrade from shell to bash."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="Full TTY"><meta property="og:description" content="Full TTY More often than not, reverse, or bind shells are shells with limited interactive capabilities. Meaning no job control, no auto-completion, no STDERR output, and, most important, poor signal handling and limited commands support. To fully leverage the shell it is convenient to upgrade to an interactive TTY with extended features.
To check if the shell is a TTY shell use the tty command.  Shell to Bash Upgrade from shell to bash."><meta property="og:type" content="article"><meta property="og:url" content="https://0xffsec.com/book/shells/full-tty/"><meta property="article:modified_time" content="2020-08-24T12:48:24+02:00"><title>Full TTY | 0xffsec Penetration Testing Book</title><link rel=manifest href=/book/manifest.json><link rel=icon href=/book/favicon.png type=image/x-icon><link rel=stylesheet href=/book/book.min.57bbbeacd5a09f86500c98715e9090c679adaabd3284c4cc22218be87c7e4a56.css integrity="sha256-V7u+rNWgn4ZQDJhxXpCQxnmtqr0yhMTMIiGL6Hx+SlY="><script defer src=/book/en.search.min.7568eb57169ce6d49f6c1d14d36a76776ac8e1aa660f531b7cbec572536b9016.js integrity="sha256-dWjrVxac5tSfbB0U02p2d2rI4apmD1MbfL7FclNrkBY="></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-142676329-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/book><span>0xffsec Penetration Testing Book</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><span>Discovery and Scanning</span><ul><li><a href=/book/discovery-and-scanning/host-discovery/>Host Discovery</a></li><li><a href=/book/discovery-and-scanning/port-scanning/>Port Scanning</a></li></ul></li><li><a href=/book/exploits-search/>Exploits Search</a></li><li><a href=/book/brute-forcing/>Brute Forcing</a></li><li><a href=/book/services/>Services</a><ul><li><a href=/book/services/ftp/>FTP - 21</a></li><li><a href=/book/services/smtp/>SMTP - 25 / 465 / 587</a></li><li><a href=/book/services/dns/>DNS - 53</a></li><li><a href=/book/services/finger/>Finger - 79</a></li><li><a href=/book/services/http-https/>HTTP/S - 80 / 443</a></li><li><a href=/book/services/pop/>POP - 110 / 995</a></li><li><a href=/book/services/nntp/>NNTP - 119 / 433 / 563</a></li><li><a href=/book/services/smb/>SMB - 139 / 445</a></li><li><a href=/book/services/imap/>IMAP - 143 / 993</a></li></ul></li><li><a href=/book/steganography/>Steganography</a></li><li><span>Web Applications</span><ul><li><a href=/book/web-applications/cgi/>CGI</a></li><li><a href=/book/web-applications/command-injection/>Command Injection</a></li><li><a href=/book/web-applications/csrf/>CSRF - Cross-Site Request Forgery</a></li><li><a href=/book/web-applications/file-inclusion-and-path-traversal/>File Inclusion</a></li></ul></li><li><span>Shells</span><ul><li><a href=/book/shells/full-tty/ class=active>Full TTY</a></li><li><a href=/book/shells/reverse-shells/>Reverse Shells</a></li><li><a href=/book/shells/restricted-shells/>Restricted Shells</a></li></ul></li><li><a href=/book/notes/ class=collapsed>Notes</a></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/book/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Full TTY</strong>
<label for=toc-control><img src=/book/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><ul><li><a href=#shell-to-bash>Shell to Bash</a></li><li><a href=#python-pty-module-python-pty-module>Python PTY Module</a></li><li><a href=#fully-interactive-tty>Fully Interactive TTY</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=full-tty>Full TTY</h1><p>More often than not, reverse, or bind shells are shells with limited interactive capabilities. Meaning no job control, no auto-completion, no <code>STDERR</code> output, and, most important, poor signal handling and limited commands support. To fully leverage the shell it is convenient to upgrade to an interactive TTY with extended features.</p><blockquote class="book-hint info">To check if the shell is a TTY shell use the <code>tty</code> command.</blockquote><h3 id=shell-to-bash>Shell to Bash</h3><p>Upgrade from shell to bash.</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#40ffff>SHELL</span>=/bin/bash script -q /dev/null
</code></pre></div><h3 id=python-pty-module-python-pty-module>Python PTY Module <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></h3><p>Spawn <code>/bin/bash</code> using <a href=https://docs.python.org/3/library/pty.html>Python&rsquo;s PTY module</a>, and connect the controlling shell with its standard I/O.</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>python -c <span style=color:#ed9d13>&#39;import pty; pty.spawn(&#34;/bin/bash&#34;)&#39;</span>
</code></pre></div><h3 id=fully-interactive-tty>Fully Interactive TTY</h3><p>Background the current remote shell (<code>^Z</code>), update the <strong>local</strong> terminal line settings with <code>stty</code><sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> and bring the remote shell back.</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>stty raw -echo &amp;&amp; <span style=color:#24909d>fg</span>
</code></pre></div><p>After bringing the job back the cursor will be pushed to the left. Reinitialize the terminal with <code>reset</code>.</p><section class=footnotes role=doc-endnotes><hr><ol><li id=fn:1 role=doc-endnote><p>“Pty — Pseudo-Terminal Utilities.” 3.8.3 Documentation, <a href=https://docs.python.org/3/library/pty.html>https://docs.python.org/3/library/pty.html</a>. <a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2 role=doc-endnote><p>“Stty.” Linux Manual Page, <a href=https://man7.org/linux/man-pages/man1/stty.1.html>https://man7.org/linux/man-pages/man1/stty.1.html</a>. <a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></section></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/0xffsec/book/commit/b769307d27f1b125713e20c608ecc881c6d7cd6f title="Last modified by Max Rodrigo | August 24, 2020" target=_blank rel=noopener><img src=/book/svg/calendar.svg class=book-icon alt=Calendar>
<span>August 24, 2020</span></a></div><div><a class="flex align-center" href=https://github.com/0xffsec/book/edit/master/content//shells/full-tty.md target=_blank rel=noopener><img src=/book/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><ul><li><a href=#shell-to-bash>Shell to Bash</a></li><li><a href=#python-pty-module-python-pty-module>Python PTY Module</a></li><li><a href=#fully-interactive-tty>Fully Interactive TTY</a></li></ul></li></ul></nav></aside></main></body></html>